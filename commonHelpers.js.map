{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.img-form');\nconst inputForm = document.querySelector('.img-inp');\nconst btnForm = document.querySelector('.img-btn');\nconst loaderForm = document.querySelector('.loader');\nconst galleryForm = document.querySelector('.gallery');\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41930626-f2ac102ea6260ef01eb19ab27';\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = inputForm.value.trim();\n  galleryForm.innerHTML = '';\n\n  if (!query) {\n    createMessage(\n      `The search field can't be empty! Please, enter your request!`\n    );\n    return;\n  }\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n  function fetchImages(url) {\n    showLoader(true);\n    return fetch(url).then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    });\n  }\n  function createMessage(message) {\n    iziToast.show({\n      message: message,\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      close: false,\n      closeOnClick: true,\n      class: 'error-svg',\n      icon: 'error-svg',\n      maxWidth: '432',\n      maxHeight: '88',\n    });\n  }\n\n  fetchImages(url)\n    .then(data => {\n      if (data.hits.length === 0) {\n        createMessage(\n          `Sorry, there are no images matching your search query. Please, try again!`\n        );\n        showLoader(false);\n      }\n      galleryForm.innerHTML = createMarkup(data.hits);\n      showLoader(false);\n      let simplyGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      searchForm.reset();\n    })\n    .catch(error => console.error(error));\n});\n\nfunction createMarkup(value) {\n  return value\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    <p class=\"gallery-item\">Likes: ${likes} Views: ${views} Comments: ${comments} Downloads: ${downloads}</p>\n  </a>\n</li>`;\n      }\n    )\n    .join('');\n}\n\nfunction showLoader(state = true) {\n  loaderForm.style.display = !state ? 'none' : 'inline-block';\n  btnForm.disabled = state;\n}\n"],"names":["searchForm","inputForm","btnForm","loaderForm","galleryForm","BASE_URL","API_KEY","event","query","createMessage","url","fetchImages","showLoader","resp","message","iziToast","data","createMarkup","SimpleLightbox","error","value","webformatURL","largeImageURL","tags","likes","views","comments","downloads","state"],"mappings":"6vBAMA,MAAMA,EAAa,SAAS,cAAc,WAAW,EAC/CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,UAAU,EAE/CC,EAAW,2BACXC,EAAU,qCAEhBN,EAAW,iBAAiB,SAAUO,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAQP,EAAU,MAAM,KAAI,EAGlC,GAFAG,EAAY,UAAY,GAEpB,CAACI,EAAO,CACVC,EACE,8DACN,EACI,MACD,CAED,MAAMC,EAAM,GAAGL,SAAgBC,OAAaE,4DAC5C,SAASG,EAAYD,EAAK,CACxB,OAAAE,EAAW,EAAI,EACR,MAAMF,CAAG,EAAE,KAAKG,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,CACF,CACD,SAASJ,EAAcK,EAAS,CAC9BC,EAAS,KAAK,CACZ,QAASD,EACT,aAAc,UACd,YAAa,OACb,SAAU,WACV,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,MAAO,YACP,KAAM,YACN,SAAU,MACV,UAAW,IACjB,CAAK,CACF,CAEDH,EAAYD,CAAG,EACZ,KAAKM,GAAQ,CACRA,EAAK,KAAK,SAAW,IACvBP,EACE,2EACV,EACQG,EAAW,EAAK,GAElBR,EAAY,UAAYa,EAAaD,EAAK,IAAI,EAC9CJ,EAAW,EAAK,EACI,IAAIM,EAAe,kBAAmB,CACxD,aAAc,MACd,aAAc,GACtB,CAAO,EACDlB,EAAW,MAAK,CACtB,CAAK,EACA,MAAMmB,GAAS,QAAQ,MAAMA,CAAK,CAAC,CACxC,CAAC,EAED,SAASF,EAAaG,EAAO,CAC3B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,kCAEmBL;AAAA,sCACID,WAAsBE;AAAA,qCACvBC,YAAgBC,eAAmBC,gBAAuBC;AAAA;AAAA,MAI1F,EACA,KAAK,EAAE,CACZ,CAEA,SAASf,EAAWgB,EAAQ,GAAM,CAChCzB,EAAW,MAAM,QAAWyB,EAAiB,eAAT,OACpC1B,EAAQ,SAAW0B,CACrB"}